{% extends "base/back/base_admin.html" %}

{% block title %} Category Manager Page {% endblock title %}
{%load static %}

{% block content%}
<!-- Content Header (Page header) -->
<section class="content-header">
	<div class="container-fluid">
	  <div class="row mb-2">
		<div class="col-sm-6">
		  <h1> จัดการหมวดหมู่ </h1>
		</div>
		<div class="col-sm-6">
		  <ol class="breadcrumb float-sm-right">
			<li class="breadcrumb-item"><a href="#">Home</a></li>
			<li class="breadcrumb-item active">Category Managment</li>
		  </ol>
		</div>
	  </div>
	</div><!-- /.container-fluid -->
</section>



<section class="content">
	<div class="container-fluid">

		{% if messages %}
			{% for message in messages %}
				{% if message.tags == 'error' %}
				<div class="card-body">
					<div class="alert alert-danger alert-dismissible">
						<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
						<h5><i class="icon fas fa-check"></i> ลบข้อมูล !</h5>
						{{ message }}
					</div>
				</div>	
				{% endif %}
				{% if message.tags == 'warning' %}
				<div class="card-body">
					<div class="alert alert-warning alert-dismissible">
						<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
						<h5><i class="icon fas fa-check"></i> บันทึก และ แก้ไขข้อมูล </h5>
						{{ message }}
					</div>
				</div>
				{% endif %}
				{% if message.tags == 'info' %}
					<button type="button" class="btn btn-info toastrDefaultInfo">	Launch Info Toast  </button>
				{% endif %}

				{% if message.tags == 'success' %}
					<div class="card-body">
						<div class="alert alert-success alert-dismissible">
							<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
							<h5><i class="icon fas fa-check"></i> เพิ่มข้อมูล!</h5>
							{{ message }}
						</div>
					</div>					
				{% endif %}
			{% endfor %}
		{% endif %}
	  <div class="row">

		<!--/.col (left) -->
		<div class="col-12">

			<div class="card">
				<div class="card-header">
				  <h3 class="card-title"> ตารางหมวดหมู่สินค้า </h3>
	
				  <div class="card-tools">
					<ul class="nav nav-pills ml-auto">
					  <li class="nav-item">
						<a class="nav-link active" href="{% url 'create-category' %}"> <i class="fa fa-plus-circle"></i> เพิ่มใหม่</a>
					  </li>
					</ul>
				  </div>

				</div>
				<div class="card-body p-0">
				  <table class="table">
					<thead>
					  <tr>
						<th> ชื่อหมวดหมู่</th>
						<th> รายละเอียดหมวดหมู่ </th>
						<th> จัดการ </th>

					  </tr>
					</thead>
					<tbody>
					{% for item in category %}
					  <tr>
						<td>
							<a href="{% url 'view-category' item.pk %}">
								
								{% if item.image_category %}
									<img src="{{ item.image_category.url }}" class="rounded" width="30" height="30"> &nbsp; 
									
									{% if item.check_data %}								
										<i class="bi bi-display-fill"></i>  
									{% else %} 
										<i class="bi bi-display"></i> 
									
									{% endif %}									
									
									{{ item.name}}
									
								{% else %}
									<i class="bi bi-image-fill"></i> &nbsp; {{ item.name }}
								{% endif %}	
								

							</a>
						</td>
						<td> {{ item.description }} </td>
						<td class="text-right py-0 align-middle">
							<div class="btn-group btn-group-sm">
							  <a href="{% url 'view-category' item.pk %}" class="btn btn-info"><i class="fas fa-eye"></i></a>
							  <a type='button' class="btn btn-danger"  data-toggle="modal" data-target="#modal-delete{{item.id}}" ><i class="fas fa-trash"></i></a>
							</div>
						</td>

						<div class="modal fade" id="modal-delete{{ item.id }}">
							<div class="modal-dialog">
							  <div class="modal-content">
								<div class="modal-header">
									<h5>คุณต้องการลบข้อมูล ?</h5>
								  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">×</span>
								  </button>
								</div>
								<div class="modal-body">
									 <p> <code>หมวดหมู่สินค้า :</code> <b> {{ item.name }}</p>				
								</div>
								<div class="modal-footer justify-content-between">
									<a href="{% url 'delete-category' item.pk %}" type="button" class="btn btn-danger">ยืนยันลบข้อมูล</a>
								  <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>

								</div>
							  </div>
							  <!-- /.modal-content -->
							</div>
							<!-- /.modal-dialog -->
						</div>

					{% endfor %}
					</tbody>
				  </table>
				</div>
				<!-- /.card-body -->
			  </div>
			<!-- /.card -->
		</div>
	  </div>
	  <!-- /.row -->
	</div><!-- /.container-fluid -->
</section>

  <div class="modal fade" id="add-category" aria-hidden="true" style="display: none;">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <h4 class="modal-title">เพิ่มหมวดหมู่ใหม่</h4>
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">×</span>
		  </button>
		</div>
		<div class="modal-body">
		<form  action="{% url 'create-category' %}" method="post"  enctype="multipart/form-data">
			<div class="form-group">
				<label for="name-category">ชื่อหมวดหมู่</label>
				<input type="text" class="form-control" id="name-category" placeholder="กรอกรายชื่อหมวดหมู่สินค้า">
			</div>
			<div class="form-group">
				<label for="description">รายละเอียดหมวดหมู่</label>
				<input type="text" class="form-control" id="description" placeholder="กรอกรายละเอียหมวดหมู่สินค้า">
			</div>
			<div class="modal-footer justify-content-between">				
				<button type="button" class="btn btn-primary ">Save changes</button>
				<button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</form>
		</div>

	  </div>
	  <!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
  </div>



{% endblock content%}